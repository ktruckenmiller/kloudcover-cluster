---
kind: aws-ecs-cluster-deployer
ecs_deployer_version: 0.0.1

cluster:
  name: staging-kloudcover
  keypair: boston
  vpc: vpc-849531e0

  availability_zones:
    - us-west-2a
    - us-west-2c
    - us-west-2b
  subnets:
    - subnet-9b2938c2
    - subnet-bc3193d8
    - subnet-ed43849b

ec2_instances:
  autoscaling: true
  instance_profile_arn: arn:aws:iam::${AWS::AccountId}:instance-profile/ecsInstanceRole
  ebs_mounts:
    - name: basic
      device_name: /dev/xvda
      size: 20
  efs_mounts:
    - name: kloudcover
      efs_id: fs-df827476
      local_path: /efs
      
  spot_fleets:
    - name: main
      desired_weight: 3
      task_threshold_out: 2
      task_threshold_in: 15
      min_weight: 0
      max_weight: 16
      bids:
        - instance_type: m3.medium
          price: 0.01
        - instance_type: t3.small
          price: 0.01
